(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{1511:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("v-navbar"),a("div",{attrs:{id:"box-contents"}},[a("div",{attrs:{id:"user-list"}},[a("div",{staticClass:"d-flex justify-content-between title"},[a("span",{staticClass:"my-auto"},[e._v("User list")]),a("button",{directives:[{name:"b-modal",rawName:"v-b-modal.creat-user-modal",modifiers:{"creat-user-modal":!0}}],staticClass:"my-auto btn-create"},[e._v("Create")])]),e._m(0),a("b-overlay",{attrs:{show:e.showOverlay,rounded:"sm"}},e._l(e.users,(function(t,r){return a("div",{key:r,class:e.getBorderStyle(r)},[a("span",{staticClass:"my-auto col-no"},[e._v(e._s(r+1))]),a("span",{staticClass:"my-auto col-id"},[e._v(e._s(t.id))]),a("span",{staticClass:"my-auto col-id"},[e._v(e._s(e.getTypeName(t.type)))]),a("span",{staticClass:"my-auto col-created"},[e._v(e._s(t.created))]),a("span",{staticClass:"my-auto col-created"},[e._v(e._s(t.last_login))]),a("button",{directives:[{name:"show",rawName:"v-show",value:"1"!==t.type,expression:"user.type !== '1'"},{name:"b-modal",rawName:"v-b-modal.edit-user-modal",modifiers:{"edit-user-modal":!0}}],staticClass:"image-button mx-5",on:{click:function(s){e.selectedUser.id=t.id,e.selectedUser.type=t.type}}},[a("img",{attrs:{src:s("dcaa")}})]),a("button",{directives:[{name:"show",rawName:"v-show",value:"1"!==t.type,expression:"user.type !== '1'"},{name:"b-modal",rawName:"v-b-modal.delete-user-modal",modifiers:{"delete-user-modal":!0}}],staticClass:"image-button xm-5",on:{click:function(s){e.selectedUser.id=t.id,e.selectedUser.type=t.type}}},[a("img",{attrs:{src:s("749b")}})])])})),0)],1)]),a("b-modal",{attrs:{id:"creat-user-modal",centered:"","header-class":"p-0 custom-modal-header","footer-class":"p-0 custom-modal-footer","dialog-class":"custom-modal-dialog","content-class":"custom-modal-content"},scopedSlots:e._u([{key:"modal-header",fn:function(){return[a("div",{staticClass:"modal-header"},[e._v("Create a new user")])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"d-flex align-items-stretch modal-footer"},[a("button",{staticClass:"flex-fill modal-btn create",on:{click:function(t){return e.createUser()}}},[e._v(" Create ")]),a("button",{staticClass:"flex-fill modal-btn cancel",on:{click:function(t){return e.cancelCreateUser()}}},[e._v(" Cancel ")])])]},proxy:!0}])},[a("div",{staticClass:"d-block padding-y-24"},[a("div",{staticClass:"d-flex p-0"},[a("span",{staticClass:"flex-fill label-user-id"},[e._v("ID")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.id,expression:"newUser.id"}],staticClass:"input-user-id",attrs:{type:"text"},domProps:{value:e.newUser.id},on:{input:function(t){t.target.composing||e.$set(e.newUser,"id",t.target.value)}}})]),a("div",{staticClass:"d-flex p-0 margin-top-24"},[a("span",{staticClass:"flex-fill label-user-id"},[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.pwd1,expression:"newUser.pwd1"}],staticClass:"input-user-id",attrs:{type:"password"},domProps:{value:e.newUser.pwd1},on:{input:function(t){t.target.composing||e.$set(e.newUser,"pwd1",t.target.value)}}})]),a("div",{staticClass:"d-flex p-0 margin-top-24"},[a("span",{staticClass:"flex-fill label-user-id"},[e._v("Confirm password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.pwd2,expression:"newUser.pwd2"}],staticClass:"input-user-id",attrs:{type:"password"},domProps:{value:e.newUser.pwd2},on:{input:function(t){t.target.composing||e.$set(e.newUser,"pwd2",t.target.value)}}})]),a("div",{staticClass:"d-flex p-0 margin-top-24"},[a("span",{staticClass:"flex-fill label-user-id"},[e._v("Type")]),a("b-form-select",{staticClass:"input-user-id",attrs:{options:e.options},model:{value:e.newUser.type,callback:function(t){e.$set(e.newUser,"type",t)},expression:"newUser.type"}})],1)])]),a("b-modal",{attrs:{id:"edit-user-modal",centered:"","header-class":"p-0 custom-modal-header","footer-class":"p-0 custom-modal-footer","dialog-class":"custom-modal-dialog2","content-class":"custom-modal-content"},scopedSlots:e._u([{key:"modal-header",fn:function(){return[a("div",{staticClass:"modal-header"},[e._v("Edit user type")])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"d-flex align-items-stretch modal-footer"},[a("button",{staticClass:"flex-fill modal-btn create",on:{click:function(t){return e.editUser()}}},[e._v(" Edit ")]),a("button",{staticClass:"flex-fill modal-btn cancel",on:{click:function(t){return e.cancelCreateUser()}}},[e._v(" Cancel ")])])]},proxy:!0}])},[a("div",{staticClass:"d-block padding-y-24"},[a("div",{staticClass:"d-flex p-0"},[a("span",{staticClass:"flex-fill label-user-id"},[e._v("ID")]),a("div",{staticClass:"div-user-id"},[e._v(e._s(e.selectedUser.id))])]),a("div",{staticClass:"d-flex p-0 margin-top-24"},[a("span",{staticClass:"flex-fill label-user-id"},[e._v("Type")]),a("b-form-select",{staticClass:"input-user-id",attrs:{options:e.options},model:{value:e.selectedUser.type,callback:function(t){e.$set(e.selectedUser,"type",t)},expression:"selectedUser.type"}})],1)])]),a("b-modal",{attrs:{id:"delete-user-modal",centered:"","header-class":"p-0 custom-modal-header","footer-class":"p-0 custom-modal-footer","dialog-class":"custom-modal-dialog2","content-class":"custom-modal-content"},scopedSlots:e._u([{key:"modal-header",fn:function(){return[a("div",{staticClass:"modal-header"},[e._v("Remove user")])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"d-flex align-items-stretch modal-footer"},[a("button",{staticClass:"flex-fill modal-btn create",on:{click:function(t){return e.deleteUser()}}},[e._v(" Remove ")]),a("button",{staticClass:"flex-fill modal-btn cancel",on:{click:function(t){return e.cancelCreateUser()}}},[e._v(" Cancel ")])])]},proxy:!0}])},[a("div",{staticClass:"d-block"},[a("div",{staticClass:"d-flex justify-content-center"},[a("img",{staticClass:"mx-auto",attrs:{src:s("afd4")}})]),a("div",{staticClass:"modal-desc"},[e._v(" Remove "+e._s(e.selectedUser.id)+" ")])])])],1)},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"d-flex header"},[s("span",{staticClass:"my-auto col-no"},[e._v("No.")]),s("span",{staticClass:"my-auto col-id"},[e._v("ID")]),s("span",{staticClass:"my-auto col-id"},[e._v("Type")]),s("span",{staticClass:"my-auto col-created"},[e._v("Created")]),s("span",{staticClass:"my-auto col-created"},[e._v("Last login")])])}],i=s("d178"),o=s("bc3a"),l=s.n(o),n={name:"user",data:function(){return{showOverlay:!0,users:[],newUser:{id:"",pwd1:"",pwd2:"",type:"1"},selectedUser:{id:"",type:"1"},options:[{value:"2",text:"manager"},{value:"3",text:"guest"}]}},created:function(){this.users.push({id:"",type:"0",created:"",lastLogin:""}),this.users.push({id:"",type:"0",created:"",lastLogin:""}),this.getUserList()},destroyed:function(){},computed:{},methods:{getTypeName:function(e){switch(e){case"0":return"";case"1":return"adminstrator";case"2":return"manager";case"3":return"guest";default:return"unknown"}},getBorderStyle:function(e){return 0==e?"d-flex user-info-noborder":"d-flex user-info"},createUser:function(){var e=this;this.showOverlay=!0,this.newUser.id&&(this.newUser.pwd1!==this.newUser.pwd2||(l()({method:"post",url:this.$store.getters.apiServer+"/php/users.php",data:{sid:this.$store.getters.sessionKey,id:this.newUser.id,pwd:this.newUser.pwd1,type:this.newUser.type}}).then((function(t){console.log(t),200==t.status&&"Success"==t.data.state?e.getUserList():e.showOverlay=!1})).catch((function(t){console.err(t),e.showOverlay=!1})),this.newUser.id="",this.newUser.pwd1="",this.newUser.pwd2="",this.newUser.type="1",this.$bvModal.hide("creat-user-modal")))},editUser:function(){var e=this;l()({method:"put",url:this.$store.getters.apiServer+"/php/users.php",params:{key:this.$store.getters.sessionKey,id:this.$store.getters.userid},data:{id:this.selectedUser.id,type:this.selectedUser.type}}).then((function(t){console.log(t),200==t.status&&"Success"==t.data.state?e.getUserList():e.showOverlay=!1})).catch((function(t){console.err(t),e.showOverlay=!1})),this.selectedUser.id="",this.selectedUser.type="",this.$bvModal.hide("edit-user-modal")},deleteUser:function(){var e=this;l()({method:"delete",url:this.$store.getters.apiServer+"/php/users.php",params:{key:this.$store.getters.sessionKey,id:this.$store.getters.userid,target:this.selectedUser.id}}).then((function(t){console.log(t),200==t.status&&"Success"==t.data.state?e.getUserList():e.showOverlay=!1})).catch((function(t){console.err(t),e.showOverlay=!1})),this.selectedUser.id="",this.selectedUser.type="",this.$bvModal.hide("delete-user-modal")},cancelCreateUser:function(){this.newUser.id="",this.newUser.pwd1="",this.newUser.pwd2="",this.newUser.type="1",this.selectedUser.id="",this.selectedUser.type="",this.$bvModal.hide("edit-user-modal"),this.$bvModal.hide("creat-user-modal"),this.$bvModal.hide("delete-user-modal")},getUserList:function(){var e=this;l()({method:"get",url:this.$store.getters.apiServer+"/php/users.php",params:{key:this.$store.getters.sessionKey,id:this.$store.getters.userid}}).then((function(t){200==t.status&&"Success"==t.data.state&&(e.users=t.data.data,e.showOverlay=!1)})).catch((function(t){console.log(t),setTimeout((function(){e.getUserList()}),1e3)}))}},components:{"v-navbar":i["a"]}},d=n,c=(s("f330"),s("2877")),u=Object(c["a"])(d,a,r,!1,null,"36727ebd",null);t["default"]=u.exports},6886:function(e,t,s){},f330:function(e,t,s){"use strict";s("6886")}}]);
//# sourceMappingURL=user.f44c7037.js.map