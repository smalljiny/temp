(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["download"],{"1bc1":function(t,e,s){},3971:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("v-navbar",{attrs:{current:"download"}}),a("b-overlay",{attrs:{show:t.showOverlay,rounded:"sm"},on:{shown:t.onShown,hidden:t.onHidden},scopedSlots:t._u([{key:"overlay",fn:function(){return[a("div",{staticClass:"d-block text-center"},[a("b-spinner",{staticClass:"mx-auto"}),t.isLoaded?t._e():a("div",{staticClass:"mx-auto"},[t._v("Please wait...")]),t.isLoaded&&t.isProgress?a("div",{staticClass:"mx-auto"},[a("b-progress",{staticClass:"progress",attrs:{value:t.progress,"show-progress":"",variant:"success",max:"100"}})],1):t._e()],1)]},proxy:!0}])},[t._v(" "),a("div",{staticClass:"d-block card-box m-24"},[a("div",{staticClass:"card-title d-flex align-items-center"},[t._v(" Download ")]),a("table",[a("thead",[a("tr",[a("td",[t._v("Â ")]),a("td",[t._v("1")]),a("td",[t._v("2")])])]),a("tbody",[a("tr",[a("td",[t._v("Slot")]),a("td",[t._v(t._s(t.slot1))]),a("td",[t._v(t._s(t.slot2))])]),a("tr",[a("td",[t._v("Status")]),a("td",[t._v(t._s(t.labelStatus(t.status1)))]),a("td",[t._v(t._s(t.labelStatus(t.status2)))])]),a("tr",[a("td",[t._v("Active")]),a("td",[t._v(t._s(0===t.active1?"FALSE":"TRUE"))]),a("td",[t._v(t._s(0===t.active2?"FALSE":"TRUE"))])]),a("tr",[a("td",[t._v("Running")]),a("td",[t._v(t._s(0===t.running1?"FALSE":"TRUE"))]),a("td",[t._v(t._s(0===t.running2?"FALSE":"TRUE"))])]),a("tr",[a("td",[t._v("File")]),a("td",[t._v(t._s(t.file1))]),a("td",[t._v(t._s(t.file2))])]),a("tr",[a("td",[t._v("Ver")]),a("td",[t._v(t._s(t.ver1))]),a("td",[t._v(t._s(t.ver2))])])])]),a("div",{staticClass:"d-flex align-items-center mt-24 mb-16"},[a("label",{staticClass:"button ml-16",attrs:{for:"ex_filename"}},[t._v("Choose file")]),a("label",{staticClass:"input",attrs:{for:"ex_filename"}},[t._v(t._s(t.file))]),a("input",{ref:"file",attrs:{type:"file",accept:".FGD, application/FGD",id:"ex_filename"},on:{change:t.selsectFile}}),a("button",{staticClass:"btn-default btn-download ml-16",on:{click:t.upload}},[t._v("Download")])]),a("div",{staticClass:"body1 ml-16 mb-24"},[t._v(" DK-RU-4CS3P4GSRU001MMmm.FGD"),a("br"),t._v(" After reboot, the download file will be automatically applied to the inactive slot. ")])])]),a("b-modal",{attrs:{id:"error-modal",centered:"","header-class":"p-0 custom-modal-header","footer-class":"p-0 custom-modal-footer","dialog-class":"custom-modal-dialog2","content-class":"custom-modal-content"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("div",{staticClass:"modal-header"},[t._v("Alert")])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("div",{staticClass:"d-flex align-items-stretch modal-footer"},[a("button",{staticClass:"flex-fill modal-btn cancel",on:{click:function(e){return t.cancelReset()}}},[t._v(" Close ")])])]},proxy:!0}])},[a("div",{staticClass:"d-block"},[a("div",{staticClass:"d-flex justify-content-center"},[a("img",{staticClass:"mx-auto",attrs:{src:s("afd4")}})]),a("div",{staticClass:"modal-desc"},[t._v(" "+t._s(t.error)+" ")])])])],1)},o=[],r=(s("b0c0"),s("d178")),i=s("bc3a"),n=s.n(i),l={name:"system",data:function(){return{isLoaded:!1,isProgress:!1,polling:void 0,progress:0,file:void 0,error:"",slot1:"",status1:"",active1:"",running1:"",file1:"",ver1:"",slot2:"",status2:"",active2:"",running2:"",file2:"",ver2:""}},created:function(){},destroyed:function(){},computed:{showOverlay:function(){return!this.isLoaded||this.isProgress}},methods:{labelStatus:function(t){return 0===t?"VALID":1===t?"INVALID":2===t?"EMPTY":"UNKNOWN"},onShown:function(){this.isLoaded||this.loadInitData()},onHidden:function(){this.progress=0},loadInitData:function(){var t=this;n()({method:"get",url:this.$store.getters.apiServer+"/php/download.php",params:{key:this.$store.getters.sessionKey,id:this.$store.getters.userid}}).then((function(e){if(200==e.status&&"Success"==e.data.state){var s=e.data.data;t.slot1=s.slot1,t.status1=s.status1,t.active1=s.active1,t.running1=s.running1,t.file1=s.file1,t.ver1=s.ver1,t.slot2=s.slot2,t.status2=s.status2,t.active2=s.active2,t.running2=s.running2,t.file2=s.file2,t.ver2=s.ver2,t.isLoaded=!0,0!==t.status&&99!==t.status&&(t.isProgress=!0,t.polling=setInterval(t.loadDownloadStatus,1e3))}})).catch((function(e){console.log(e),setTimeout((function(){t.loadInitData()}),1e3)}))},loadDownloadStatus:function(){var t=this;n()({method:"get",url:this.$store.getters.apiServer+"/php/download.php",params:{key:this.$store.getters.sessionKey,id:this.$store.getters.userid}}).then((function(e){if(200==e.status&&"Success"==e.data.state){var s=e.data.data;if(t.slot1=s.slot1,t.status1=s.status1,t.active1=s.active1,t.running1=s.running1,t.file1=s.file1,t.ver1=s.ver1,t.slot2=s.slot2,t.status2=s.status2,t.active2=s.active2,t.running2=s.running2,t.file2=s.file2,t.ver2=s.ver2,0!==s.reason){t.isProgress=!1,clearInterval(t.polling);var a="Unknown";switch(s.reason){case 101:a="Checksum";break;case 102:a="Length";break;case 103:a="Abnormal";break;case 104:a="Timeout";break;case 105:a="No file";break;case 106:a="Missing file";break;case 107:a="Comm";break;case 108:a="Version mismatch";break;case 109:a="etc.";break;case 110:a="Downloanding";break;case 111:a="Uploading";break;case 112:a="DU Downloading";break;case 113:a="AP";break;case 114:a="OS";break;case 115:a="BL";break;case 116:a="File name error";break;case 117:a="File name empty";break;case 118:a="Slot is same";break}t.error="Download failed ( ".concat(a," )"),t.$bvModal.show("error-modal")}else 0!==s.status&&99!==s.status||(t.isProgress=!1,clearInterval(t.polling));t.progress=s.progress}})).catch((function(e){console.log(e),setTimeout((function(){t.loadInitData()}),1e3)}))},selsectFile:function(t){this.file=t.target.files[0].name},upload:function(){var t=this;if(this.$refs.file.files[0]){this.isProgress=!0;var e=new FormData;e.append("zipFile",this.$refs.file.files[0]),n()({method:"post",url:this.$store.getters.apiServer+"/php/download.php",params:{key:this.$store.getters.sessionKey},headers:{"Content-Type":"multipart/form-data"},data:e}).then((function(e){var s=e.data.data;0===s.status&&111===s.reason?(t.error="Upload failed",t.$bvModal.show("error-modal")):(t.isProgress=!0,t.polling=setInterval(t.loadDownloadStatus,1e3)),t.file="",t.$refs.file.value=""})).catch((function(e){t.file="",t.$refs.file.value="",t.error=e,t.$bvModal.show("error-modal")}))}else this.error="Please select a file.",this.$bvModal.show("error-modal")},cancelReset:function(){this.$bvModal.hide("error-modal")}},components:{"v-navbar":r["a"]}},c=l,d=(s("c9ee"),s("2877")),u=Object(d["a"])(c,a,o,!1,null,"309b9a6c",null);e["default"]=u.exports},b0c0:function(t,e,s){var a=s("83ab"),o=s("9bf2").f,r=Function.prototype,i=r.toString,n=/^\s*function ([^ (]*)/,l="name";a&&!(l in r)&&o(r,l,{configurable:!0,get:function(){try{return i.call(this).match(n)[1]}catch(t){return""}}})},c9ee:function(t,e,s){"use strict";s("1bc1")}}]);
//# sourceMappingURL=download.71e12d07.js.map